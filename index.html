<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./assets/css/reset.css" />
    <link rel="stylesheet" href="./assets/css/style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Montserrat"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <title>Sub Builder Preview</title>
  </head>
  <style>
    .w3-sidebar a {
      font-family: "Roboto", sans-serif;
    }
    body,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    .w3-wide {
      font-family: "Montserrat", sans-serif;
    }
  </style>
  <body class="w3-content" style="max-width: 1200px">
    <!-- Sidebar/menu -->
    <nav
      class="w3-sidebar w3-bar-block w3-black w3-collapse w3-top"
      style="z-index: 3; width: 250px"
      id="mySidebar"
    >
      <div class="w3-container w3-display-container w3-padding-16">
        <i
          onclick="w3_close()"
          class="fa fa-remove w3-hide-large w3-button w3-display-topright"
        ></i>
        <img src="assets/images/site-logo_360x.png" width="150" />
      </div>
      <div
        class="w3-padding-64 w3-large w3-text-grey"
        style="font-weight: bold"
      >
        <a href="#" class="w3-bar-item w3-button">Shirts</a>
        <a href="#" class="w3-bar-item w3-button">Dresses</a>
        <a
          onclick="myAccFunc()"
          href="javascript:void(0)"
          class="w3-button w3-block w3-white w3-left-align"
          id="myBtn"
        >
          Jeans <i class="fa fa-caret-down"></i>
        </a>
        <div
          id="demoAcc"
          class="w3-bar-block w3-hide w3-padding-large w3-medium"
        >
          <a href="#" class="w3-bar-item w3-button w3-light-grey"
            ><i class="fa fa-caret-right w3-margin-right"></i>Skinny</a
          >
          <a href="#" class="w3-bar-item w3-button">Relaxed</a>
          <a href="#" class="w3-bar-item w3-button">Bootcut</a>
          <a href="#" class="w3-bar-item w3-button">Straight</a>
        </div>
        <a href="#" class="w3-bar-item w3-button">Jackets</a>
        <a href="#" class="w3-bar-item w3-button">Gymwear</a>
        <a href="#" class="w3-bar-item w3-button">Blazers</a>
        <a href="#" class="w3-bar-item w3-button">Shoes</a>
      </div>
      <a href="#footer" class="w3-bar-item w3-button w3-padding">Contact</a>
      <a
        href="javascript:void(0)"
        class="w3-bar-item w3-button w3-padding"
        onclick="document.getElementById('newsletter').style.display='block'"
        >Newsletter</a
      >
      <a href="#footer" class="w3-bar-item w3-button w3-padding">Subscribe</a>
    </nav>

    <!-- Top menu on small screens -->
    <header class="w3-bar w3-top w3-hide-large w3-black w3-xlarge">
      <img src="assets/images/site-logo_360x.png" width="100" padding-top="1" />
      <a
        href="javascript:void(0)"
        class="w3-bar-item w3-button w3-padding-24 w3-right"
        onclick="w3_open()"
        ><i class="fa fa-bars"></i
      ></a>
    </header>

    <!-- Overlay effect when opening sidebar on small screens -->
    <div
      class="w3-overlay w3-hide-large"
      onclick="w3_close()"
      style="cursor: pointer"
      title="close side menu"
      id="myOverlay"
    ></div>

    <!-- !PAGE CONTENT! -->
    <div class="w3-main" style="margin-left: 250px">
      <!-- Push down content on small screens -->
      <div class="w3-hide-large" style="margin-top: 83px"></div>

      <!-- Top header -->
      <header class="w3-container w3-xlarge">
        <p class="w3-left">Jeans</p>
        <p class="w3-right">
          <i class="fa fa-shopping-cart w3-margin-right"></i>
          <i class="fa fa-search"></i>
        </p>
      </header>

      <!-- Image header -->
      √ç
      <!-- Iframe -->
      <div id="loaderAlign">
        <div class="loader"></div>
      </div>
      <div
        id="iframediv"
        style="display: none; height: 2905px; min-height: 600px"
      >
        <iframe
          id="myIframe"
          scrolling="no"
          height="100%"
          width="100%"
          src="https://www.augustasportswear.com/custom-sublimation"
        >
        </iframe>
      </div>

      <!-- Subscribe section -->
      <div class="w3-container w3-black w3-padding-32">
        <h1>Subscribe</h1>
        <p>To get special offers and VIP treatment:</p>
        <p>
          <input
            class="w3-input w3-border"
            type="text"
            placeholder="Enter e-mail"
            style="width: 100%"
          />
        </p>
        <button type="button" class="w3-button w3-red w3-margin-bottom">
          Subscribe
        </button>
      </div>

      <!-- Footer -->
      <footer
        class="w3-padding-64 w3-light-grey w3-small w3-center"
        id="footer"
      >
        <div class="w3-row-padding">
          <div class="w3-col s4">
            <h4>Contact</h4>
            <p>Questions? Go ahead.</p>
            <form action="/action_page.php" target="_blank">
              <p>
                <input
                  class="w3-input w3-border"
                  type="text"
                  placeholder="Name"
                  name="Name"
                  required
                />
              </p>
              <p>
                <input
                  class="w3-input w3-border"
                  type="text"
                  placeholder="Email"
                  name="Email"
                  required
                />
              </p>
              <p>
                <input
                  class="w3-input w3-border"
                  type="text"
                  placeholder="Subject"
                  name="Subject"
                  required
                />
              </p>
              <p>
                <input
                  class="w3-input w3-border"
                  type="text"
                  placeholder="Message"
                  name="Message"
                  required
                />
              </p>
              <button type="submit" class="w3-button w3-block w3-black">
                Send
              </button>
            </form>
          </div>

          <div class="w3-col s4">
            <h4>About</h4>
            <p><a href="#">About us</a></p>
            <p><a href="#">We're hiring</a></p>
            <p><a href="#">Support</a></p>
            <p><a href="#">Find store</a></p>
            <p><a href="#">Shipment</a></p>
            <p><a href="#">Payment</a></p>
            <p><a href="#">Gift card</a></p>
            <p><a href="#">Return</a></p>
            <p><a href="#">Help</a></p>
          </div>

          <div class="w3-col s4 w3-justify">
            <h4>Store</h4>
            <p><i class="fa fa-fw fa-map-marker"></i> Company Name</p>
            <p><i class="fa fa-fw fa-phone"></i> 0044123123</p>
            <p><i class="fa fa-fw fa-envelope"></i> ex@mail.com</p>
            <h4>We accept</h4>
            <p><i class="fa fa-fw fa-cc-amex"></i> Amex</p>
            <p><i class="fa fa-fw fa-credit-card"></i> Credit Card</p>
            <br />
            <i class="fa fa-facebook-official w3-hover-opacity w3-large"></i>
            <i class="fa fa-instagram w3-hover-opacity w3-large"></i>
            <i class="fa fa-snapchat w3-hover-opacity w3-large"></i>
            <i class="fa fa-pinterest-p w3-hover-opacity w3-large"></i>
            <i class="fa fa-twitter w3-hover-opacity w3-large"></i>
            <i class="fa fa-linkedin w3-hover-opacity w3-large"></i>
          </div>
        </div>
      </footer>

      <div class="w3-black w3-center w3-padding-24">
        Powered by
        <a
          href="https://www.w3schools.com/w3css/default.asp"
          title="W3.CSS"
          target="_blank"
          class="w3-hover-opacity"
          >w3.css</a
        >
      </div>

      <!-- End page content -->
    </div>

    <!-- Newsletter Modal -->
    <div id="newsletter" class="w3-modal">
      <div class="w3-modal-content w3-animate-zoom" style="padding: 32px">
        <div class="w3-container w3-white w3-center">
          <i
            onclick="document.getElementById('newsletter').style.display='none'"
            class="fa fa-remove w3-right w3-button w3-transparent w3-xxlarge"
          ></i>
          <h2 class="w3-wide">NEWSLETTER</h2>
          <p>
            Join our mailing list to receive updates on new arrivals and special
            offers.
          </p>
          <p>
            <input
              class="w3-input w3-border"
              type="text"
              placeholder="Enter e-mail"
            />
          </p>
          <button
            type="button"
            class="w3-button w3-padding-large w3-red w3-margin-bottom"
            onclick="document.getElementById('newsletter').style.display='none'"
          >
            Subscribe
          </button>
        </div>
      </div>
    </div>

    <script>
      // Accordion
      function myAccFunc() {
        var x = document.getElementById("demoAcc");
        if (x.className.indexOf("w3-show") == -1) {
          x.className += " w3-show";
        } else {
          x.className = x.className.replace(" w3-show", "");
        }
      }

      // Click on the "Jeans" link on page load to open the accordion for demo purposes
      document.getElementById("myBtn").click();

      // Open and close sidebar
      function w3_open() {
        document.getElementById("mySidebar").style.display = "block";
        document.getElementById("myOverlay").style.display = "block";
      }

      function w3_close() {
        document.getElementById("mySidebar").style.display = "none";
        document.getElementById("myOverlay").style.display = "none";
      }
    </script>
    <script type="text/javascript">
      var asbFSPluginVersion = "20210901-0805";
      var pageUrl = location.href;
      var domainUrl = document.domain;
      var pageQuery = null;
      var iframeHasSameDomainUrl = true;

      var categoryArray = [
        { name: "fanwear", discount: 5, addlLeadTime: 2, moq: 6, moqPrice: 60 },
        {
          name: "lacrosse",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
        {
          name: "baseball",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
        {
          name: "basketball",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
        { name: "soccer", discount: 5, addlLeadTime: 2, moq: 6, moqPrice: 60 },
        {
          name: "football",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
        { name: "hockey", discount: 5, addlLeadTime: 2, moq: 6, moqPrice: 60 },
        { name: "fleece", discount: 5, addlLeadTime: 2, moq: 6, moqPrice: 60 },
        { name: "track", discount: 5, addlLeadTime: 2, moq: 6, moqPrice: 60 },
        {
          name: "training",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
        {
          name: "softball",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
        { name: "polo", discount: 5, addlLeadTime: 2, moq: 6, moqPrice: 60 },
        {
          name: "5-day-turbo",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
        {
          name: "volleyball",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
        {
          name: "babe-ruth-turbo",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
        {
          name: "accessories",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
        {
          name: "compression",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
        {
          name: "semi-sublimated",
          discount: 5,
          addlLeadTime: 2,
          moq: 6,
          moqPrice: 60,
        },
      ];

      var categoryShareMapper = {
        fanwear: "fanwear",
        lacrosse: "lacrosse",
        baseball: "baseball",
        basketball: "basketball",
        soccer: "soccer",
        football: "football",
        hockey: "hockey",
        fleece: "fleece",
        outerwear: "fleece",
        track: "track",
        training: "training",
        softball: "softball",
        polos: "polo",
        turbo: "5-day-turbo",
        volleyball: "volleyball",
        "babe ruth turbo": "babe-ruth-turbo",
        "masks, gaiters,": "accessories",
        compression: "compression",
        "semi-sublimated": "semi-sublimated",
      };

      window.onmessage = (e) => {
        var data = e.data.toString();

        if (e.data.domainUrl) {
          iframeHasSameDomainUrl = false;
          pageUrl = e.data.pageUrl;
          pageQuery = e.data.pageQuery;
          var domain = e.data.domainUrl;
          domainUrl = domain.replace(/^https?:\/\//, "");
          setIframeSrc();
          var iframeSrc = getIframeSrc();
        }
        if (data.indexOf("asgIframeHeight") > -1) {
          var iframeHeight = e.data.split(":");
          document.getElementById("iframediv").style.height =
            iframeHeight[1] + "px";
        }
        if (data.indexOf("reLoadIframe") > -1) {
          //document.getElementById("showSummary").style.display = "none";
          setIframeSrc();
        }
        if (data.indexOf("scrollToTop") > -1) {
          window.scrollTo({ top: 0, left: 0, behavior: "smooth" });
        }
        if (data.indexOf("asgPageName") > -1) {
          var pageName = e.data.split(":");
          if (pageName[1] == "configurator")
            document
              .getElementById("myIframe")
              .setAttribute("scrolling", "yes");
          else {
            document.getElementById("myIframe").setAttribute("scrolling", "no");
          }
        }
      };
      document.querySelector("#myIframe").addEventListener("load", (e) => {
        sendParentHeightToChild();
      });
      function sendParentHeightToChild() {
        var child = document.getElementById("myIframe").contentWindow;
        var elemTop = document.getElementById("iframediv").offsetTop;
        var windowHeight =
          document.documentElement.clientHeight ||
          document.body.clientHeight ||
          window.innerHeight;
        var calcHeight = windowHeight - elemTop;
        if (child.postMessage) {
          child.postMessage("parentHeight:" + calcHeight, "*");
          child.postMessage("parentDomain:" + domainUrl, "*");
        }
      }
      function sendDataToChild() {
        var child = document.getElementById("myIframe").contentWindow;
        if (child.postMessage) {
          child.postMessage("loadNextPageIframe", "*");
        }
      }
      function getFullUrl() {
        var searchLocation = false;
        if (window.location) {
          if (window.location.search) {
            if (window.location.search.substr(1)) {
              searchLocation = true;
            }
          }
        }
        if (searchLocation) {
          return window.location.search.substr(1);
        } else {
          var baseUrl = window.document.baseURI;
          var baseUrlData = baseUrl.split("?");
          if (baseUrlData[1] != undefined) {
            return baseUrlData[1];
          }
          return "";
        }
      }
      function getCurrentUrlParams() {
        if (iframeHasSameDomainUrl === false) {
          return pageQuery;
        } else {
          var operator = "&";
          var getUrl = getFullUrl();
          var queryString = (function (params) {
            if (params === "") return {};
            var obj = {};
            for (var i = 0; i < params.length; ++i) {
              var value = params[i].split("=", 2);
              if (value.length === 1) obj[value[0]] = "";
              else
                obj[value[0]] = decodeURIComponent(
                  value[1].replace(/\+/g, " ")
                );
            }
            return obj;
          })(getUrl.split(operator));

          return queryString;
        }
      }
      function setIframeSrc() {
        var url = getIframeSrc();
        if (url) {
          document.getElementById("myIframe").src = url;
        }
        setTimeout(function () {
          document.getElementById("iframediv").style.display = "block";
          document.getElementById("loaderAlign").style.display = "none";
        }, 1000);
      }
      function validate(queryString, type) {
        if (queryString) {
          if (queryString[type]) {
            return true;
          }
          return false;
        }
        return false;
      }
      function getIframeSrc() {
        var queryString = getCurrentUrlParams();

        if (validate(queryString, "categoryName")) {
          var categoryName = queryString["categoryName"];
          return generateUrl(categoryName.toLowerCase().trim());
        } else {
          var currentURL = pageUrl;
          var url = currentURL.split("?");
          var urlArray = url[0];
          var urlHrefArray = urlArray.split("/");
          var categoryName = null;
          urlHrefArray.forEach(function (urlEntity) {
            categoryArray.forEach(function (category) {
              if (
                urlEntity.toLowerCase().trim() ===
                category.name.toLowerCase().trim()
              ) {
                categoryName = category.name.toLowerCase().trim();
              }
            });
          });
          return generateUrl(categoryName);
        }
      }
      function isConfiguratorPage() {
        var queryString = getCurrentUrlParams();
        if (validate(queryString, "sNumber")) {
          return true;
        }
        return false;
      }
      function generateUrl(categoryName) {
        if (!categoryName) return false;
        var currentIframeUrl = document.getElementById("myIframe").src;
        var replaceText = "custom-sublimation-" + categoryName;
        if (isConfiguratorPage()) {
          replaceText = "Configurator";
          categoryName = categoryShareMapper[categoryName];
        } else if (
          categoryName === "5-day-turbo" ||
          categoryName === "semi-sublimated"
        ) {
          replaceText = categoryName;
        }
        var queryString = getCurrentUrlParams();
        var Index = categoryArray.findIndex(
          (x) => x.name.toLowerCase().trim() === categoryName
        );
        var categoryObj = categoryArray[Index];
        var url = currentIframeUrl.split("?");
        var urlArray = url[0];
        var paramsArray = url[1];
        var urlHrefArray = urlArray.split("/");
        var urlHrefReplaceEntity = urlHrefArray[urlHrefArray.length - 1];
        url[0] = urlArray.replace(urlHrefReplaceEntity, replaceText);
        var newUrl = url.join("?");
        var href = new URL(newUrl);
        var categoryObjLength = Object.keys(categoryObj).length;
        if (categoryObjLength) {
          Object.keys(categoryObj).forEach(function (key) {
            href.searchParams.delete(key);
            href.searchParams.set(key, categoryObj[key]);
          });
        }
        if (isConfiguratorPage()) {
          Object.keys(queryString).forEach(function (key) {
            href.searchParams.delete(key);
            href.searchParams.set(key, queryString[key]);
          });
        }

        return href.toString();
      }
      function isScrolledIntoView() {
        var elem = document.getElementById("iframediv");
        var docViewTop =
          (document.documentElement && document.documentElement.scrollTop) ||
          document.body.scrollTop;
        var windowHeight =
          window.innerHeight ||
          document.documentElement.clientHeight ||
          document.body.clientHeight;
        var docViewBottom = docViewTop + windowHeight;
        var elemTop = elem.offsetTop;
        var elemBottom = elemTop + elem.offsetHeight;
        return elemBottom <= docViewBottom;
      }
      if (typeof $ !== "undefined") {
        if ($(document).ready) {
          $(document).ready(pageLoad, false);
        } else {
          document.addEventListener("load", pageLoad, false);
        }
      } else {
        if (window.attachEvent) {
          window.attachEvent("onload", pageLoad);
        } else if (window.addEventListener) {
          window.addEventListener("load", pageLoad, false);
        } else {
          document.addEventListener("load", pageLoad, false);
        }
      }
      function pageLoad() {
        setIframeSrc();
        window.onscroll = function () {
          if (isScrolledIntoView()) {
            sendDataToChild();
          }
        };
      }
    </script>
  </body>
</html>
